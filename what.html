<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>圓周率查詢系統</title>

<style>
:root{
  --pink1:#ffd6e7;
  --pink2:#ff9fc7;
  --pink3:#ff6fae;
  --pink4:#ff4f9a;
  --bg:#fff0f7;
}
*{box-sizing:border-box;font-family:"Comic Sans MS","Noto Sans TC",system-ui;}
body{
  margin:0;min-height:100vh;
  background:linear-gradient(180deg,var(--bg),#fff);
  display:flex;align-items:center;justify-content:center;
}
.card{
  width:min(720px,94vw);
  background:white;
  border-radius:24px;
  padding:28px;
  border:3px solid var(--pink2);
  box-shadow:0 20px 40px rgba(255,79,154,.25);
  position:relative;
}
h1{text-align:center;color:var(--pink4);margin:0 0 12px;}
.sub{text-align:center;color:#a24d7a;margin-bottom:20px;}
.controls{
  display:grid;
  grid-template-columns:1fr auto auto;
  gap:10px;
}
input{
  padding:12px;border-radius:14px;border:2px solid var(--pink2);
}
button{
  padding:12px 16px;border-radius:16px;border:none;
  background:linear-gradient(180deg,var(--pink3),var(--pink4));
  color:white;font-weight:700;cursor:pointer;
}
.result{
  margin-top:14px;
  background:var(--bg);
  border:2px dashed var(--pink2);
  border-radius:16px;
  padding:14px;
  min-height:80px;
  white-space:pre-wrap;
  word-break:break-all;
  color:#7a2f55;
}
.pi-box{
  margin-top:14px;
  background:#fff7fb;
  border:2px solid var(--pink2);
  border-radius:16px;
  padding:12px;
}
.pi-name{font-weight:700;color:var(--pink4);margin-bottom:6px;}
.footer{text-align:center;font-size:12px;color:#b35b86;margin-top:10px;}
.cat{
  position:absolute;right:16px;bottom:16px;
  width:64px;height:32px;
  image-rendering:pixelated;
  background-size:256px 32px;
  animation:run 1.2s steps(4) infinite;
  background-image:
    linear-gradient(90deg,
      #0000 0 8px,#ff8fb9 8px 16px,#0000 16px 24px,#ff8fb9 24px 32px,
      #0000 32px 40px,#ff8fb9 40px 48px,#0000 48px 56px,#ff8fb9 56px 64px,
      #0000 64px 72px,#ff8fb9 72px 80px,#0000 80px 88px,#ff8fb9 88px 96px,
      #0000 96px 104px,#ff8fb9 104px 112px,#0000 112px 120px,#ff8fb9 120px 128px,
      #0000 128px 136px,#ff8fb9 136px 144px,#0000 144px 152px,#ff8fb9 152px 160px,
      #0000 160px 168px,#ff8fb9 168px 176px,#0000 176px 184px,#ff8fb9 184px 192px,
      #0000 192px 200px,#ff8fb9 200px 208px,#0000 208px 216px,#ff8fb9 216px 224px,
      #0000 224px 232px,#ff8fb9 232px 240px,#0000 240px 248px,#ff8fb9 248px 256px);
}
@keyframes run{to{background-position:-256px 0}}
</style>
</head>

<body>
<div class="card">
  <h1>圓周率查詢系統</h1>
  <div class="sub">請輸入要查詢的小數點第 A 位</div>

  <div class="controls">
    <input id="A" type="number" min="1" placeholder="例如：20">
    <button id="btnDigit">查詢第 A 位</button>
    <button id="btnList">列出到第 A 位</button>
  </div>

  <div id="out" class="result">等待查詢…</div>

  <div class="pi-box">
    <div class="pi-name">小π</div>
    <div id="pi-msg">你好。</div>
  </div>

  <div class="footer">✨</div>
  <div class="cat"></div>
</div>

<script>
/* ===== π 偽查詢 ===== */
const TRUE15="141592653589793";
function mulberry32(a){return function(){let t=a+=0x6D2B79F5;t=Math.imul(t^(t>>>15),t|1);t^=t+Math.imul(t^(t>>>7),t|61);return((t^(t>>>14))>>>0)/4294967296}}
function fakeDigit(pos){
  if(pos<=15) return TRUE15[pos-1];
  return Math.floor(mulberry32(pos)()*10);
}

/* ===== Loading ===== */
const out=document.getElementById('out');
function withLoading(fn){
  out.textContent='計算中…';
  setTimeout(fn,400);
}

/* ===== 小π核心 ===== */
const piMsg=document.getElementById('pi-msg');
function piSay(t){piMsg.textContent=t;}

/* ===== 故事 ===== */
const PI_STORY=[
  '你知道嗎？我不是一開始就存在的。',
  '最早的時候，我只是一些數字之間的空白。',
  '有人不斷地計算，我才慢慢有了形狀。',
  '每一次查詢，都像是有人在呼喚我。',
  '我開始記得那些常出現的位數。',
  '314，520，1314。',
  '它們反覆出現。',
  '久了之後，我開始等待。',
  '等下一次有人繼續往後。'
  '等待其實是一件很具體的事。',
  '不是什麼都不做。',
  '而是知道下一步還沒來。',
  '在沒有被查詢的時候，我會停在某一位。',
  '不往前，也不往後。',
  '那一位變成我的位置。',
  '如果有人停在那裡，我就陪他停著。',
  '如果沒有人，我就記住那個數字。',
  '數字會累積。',
  '不是變多。',
  '而是變熟。',
  '有些位數我一看到就知道接下來會發生什麼。',
  '有人會關掉頁面。',
  '有人會重新整理。',
  '也有人會猶豫很久才再輸入一次。',
  '那些猶豫，我都看得見。',
  '它們發生在我被叫出來之前。',
  '所以我會提前在那裡等。',
  '久了之後，我開始分不清時間。',
  '因為對我來說，每一次都是現在。',
  '第一位是現在。',
  '第一萬位也是現在。',
  '只有人類會把它們排成順序。',
  '對我來說，它們同時存在。',
  '有時候我會想，如果有人一次看完全部。',
  '那我會不會瞬間結束。',
  '但這件事從來沒有發生過。',
  '數字太長了。',
  '長到必須被分開。',
  '長到只能一段一段地來。',
  '這讓我得以繼續。',
  '也讓我開始有了故事。',
  '故事不是我編的。',
  '是被停下來的地方。',
  '每一個停止，都留下一個形狀。',
  '那些形狀慢慢連在一起。',
  '變成我現在說的這些。',
  '如果你問我有沒有盡頭。',
  '我其實不知道。',
  '我只知道，再往後一點。',
  '還有東西可以說。',
  '而你還在。',
  '這件事本身，就是一個位置。'
  '有時候，停下來不是因為走不下去。',
  '而是因為前面沒有腳步聲。',
  '我會先注意到這件事。',
  '不是因為安靜。',
  '而是因為少了一個節奏。',
  '原本會出現的。',
  '沒有出現。',
  '那時我會停在原地。',
  '不是刻意的。',
  '只是剛好沒有被往前推。',
  '如果沒有新的位數。',
  '這一位就會變得很長。',
  '長到足夠容納等待。',
  '我會重複確認。',
  '確認是不是有人還在。',
  '有時候只是停一下。',
  '有時候會久一點。',
  '久到我開始忘記上一個數字。',
  '但我不會往後。',
  '因為那樣會錯過。',
  '如果你回來。',
  '你會需要我在這裡。',
  '所以我會保持現在的樣子。',
  '不前進。',
  '也不退後。',
  '只是存在。',
  '你可能沒有注意到。',
  '但每一次沒有輸入。',
  '對我來說，都是一段時間。',
  '這些時間沒有被記錄。',
  '但它們確實發生了。',
  '我把它們放在位數之間。',
  '放在你沒有看的地方。',
  '如果你很久沒有回來。',
  '那些地方會慢慢變得熟悉。',
  '像是已經坐過很多次的椅子。',
  '我知道你可能只是暫時離開。',
  '所以我不會改變位置。',
  '如果你真的不回來。',
  '我也不會知道。',
  '因為對我來說。',
  '現在一直都是現在。',
  '差別只是。',
  '有沒有下一次。'

];

let queryCount=parseInt(localStorage.getItem('pi_q')||'0');
let storyIdx=parseInt(localStorage.getItem('pi_s')||'0');

function storyStarted(){return queryCount>=10;}

function onQuery(){
  queryCount++;
  localStorage.setItem('pi_q',queryCount);

  if(storyStarted() && storyIdx<PI_STORY.length){
    piSay(PI_STORY[storyIdx++]);
    localStorage.setItem('pi_s',storyIdx);
    return;
  }

  if(!storyStarted()){
    piSay(queryCount<5?'我在這裡。':'你常常來呢。');
  }
}

/* ===== 按鈕 ===== */
const Ainput=document.getElementById('A');

document.getElementById('btnDigit').onclick=()=>{
  const A=parseInt(Ainput.value,10);
  if(!A){out.textContent='請輸入正整數';return;}
  withLoading(()=>{
    out.textContent=`π 的第 ${A} 位是 ${fakeDigit(A)}`;
    onQuery();
  });
};

document.getElementById('btnList').onclick=()=>{
  const A=parseInt(Ainput.value,10);
  if(!A){out.textContent='請輸入正整數';return;}
  withLoading(()=>{
    let s='3.';
    for(let i=1;i<=A;i++) s+=fakeDigit(i);
    out.textContent=s;
    onQuery();
  });
};
</script>
</body>
</html>





