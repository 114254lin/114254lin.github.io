<?php
/**
 * Section 1 — π 数据嵌入 (PHP Template 版本)
 * 本段只建立：
 *   - PHP 内含 π 10000 位字串
 *   - 基础模板结构：header/body/js placeholder
 *   - 提供 getDigit(), getRange() 等函数
 *   - 供后续 Section 2~N 继续补写
 */
?>
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>π 里的第 762 位是你 - PHP Template</title>
    <style>
        body {
            margin: 0;
            font-family: monospace;
            background: #ffffff;
            color: #000000;
        }
        #app { padding: 20px; }
    </style>
</head>
<body>
<?php
    // π 前 10000 位（不含小数点）
    // 下方为占位，Section 2 将填入完整 10000 位
    $PI10000 = "" .
    "14159265358979323846264338327950288419716939937510".
    "58209749445923078164062862089986280348253421170679".
    "82148086513282306647093844609550582231725359408128".
    "48111745028410270193852110555964462294895493038196"
    /* TODO: FULL 10000 DIGITS OF PI WILL BE INSERTED HERE IN FINAL ASSEMBLY */
    ;

    // 取得 π 的第 n 位（1-based）
    function getDigit($n) {
        global $PI10000;
        if ($n < 1 || $n > strlen($PI10000)) return null;
        return $PI10000[$n - 1];
    }

    // 取得范围位数
    function getRange($start, $len) {
        global $PI10000;
        return substr($PI10000, $start - 1, $len);
    }
?>

<div id="app">
    <h2>π Visual Novel — PHP Template</h2>
    <p>目前载入：π 10000 位（占位版）。<br>下一段会补上完整版。</p>
</div>

<script>
// JS 也可读取 PHP 注入的 π
const PI10000 = `<?php echo $PI10000; ?>`;
</script>
</body>
</html>

<?php
/* modules/stage_pi_query.php
   Module 4 — π 前 2000 位查询阶段（PHP-template 版本）
*/
?>
<div id="module-pi-query">
  <!-- TODO: Full implementation for Stage 1–3 (0–2000 位) →
       - 白底
       - 查询输入框
       - 右下角模糊→清晰零
       - 逐步出现微小对白
       - 节奏锁定 / 点击推进
  -->
</div>
<script>
(() => {
  console.log('Stage π Query Module Loaded (stub)');
})();
</script>



